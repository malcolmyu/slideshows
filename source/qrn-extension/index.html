<!doctype html>
<html lang="zh-CN">

  <head>
    <meta charset="utf-8">

    <title>Qunar React Native Extension</title>

    <meta name="description" content="An Introduction about Qunar React Native Extension.">
    <meta name="author" content="Yu Minghao">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <link rel="stylesheet" href="//malcolmyu.github.io/reveal.js/css/reveal.css">
    <link rel="stylesheet" href="//malcolmyu.github.io/reveal.js/css/theme/just.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="//malcolmyu.github.io/reveal.js/lib/css/zenburn.css">

    <!-- If the query includes "print-pdf", include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( "link" );
        link.rel = "stylesheet";
        link.type = "text/css";
        link.href = "//malcolmyu.github.io/reveal.js/css/print/pdf.css";
        document.getElementsByTagName( "head" )[0].appendChild( link );
      }
    </script>
  </head>

  <body>

    <div class="reveal">
      <div class="slides">

        <!-- start -->
        <section>
          <h1>Qunar React Native Extension</h1>
          <address>
            <p>äºæ˜æ˜Š</p>
            <p>
              <a href="http://weibo.com/sombiesombie" title="@sombiesombie" class="icon-weibo"></a>
              <a href="https://twitter.com/minghaoyu" title="@minghaoyu" class="icon-twitter"></a>
              <a href="http://github.com/malcolmyu" title="@malcolmyu" class="icon-github-circled"></a>
            </p>
          </address>
        </section>

        <!-- ç°é˜¶æ®µé‡åˆ°çš„é—®é¢˜ -->
        <section>
          <section>
            <h2>ç°é˜¶æ®µé‡åˆ°çš„é—®é¢˜</h2>
          </section>

          <section>
            <h3>Navigator</h3>
            <figure>
              <p><img src="img/understand-navigator.png" class="transparent"></p>
              <figcaption>å…¨è®ºå›ç‚¹å‡»é‡<strong>ç¬¬äºŒ</strong>çš„è´´å­</figcaption>
              <p class="fragment">ç‚¹å‡»<strong>ç¬¬ä¸€</strong>æ˜¯å¦‚ä½•å†™ ES6 ğŸ˜‚</p>
            </figure>
          </section>

          <section>
            <h3>é¡µé¢è·³è½¬</h3>
            <p class="fragment"><img src="img/rn-hy.png" class="transparent"></p>
            <figcaption class="fragment">å®¢æˆ·ç«¯å¤§äº†ï¼Œä»€ä¹ˆæ ·çš„æŠ€æœ¯éƒ½æœ‰ï¼ˆ<strong>RN / Native / HY</strong>ï¼‰</figcaption>
          </section>

          <section>
            <h3>æ•°æ®æµç®¡ç†</h3>
            <ul>
              <li class="fragment">çˆ¶ç»„ä»¶å¦‚ä½•è·Ÿå­ç»„ä»¶é€šä¿¡ï¼Ÿ<code class="fragment">props</code></li>
              <li class="fragment">å­ç»„ä»¶å¦‚ä½•è·Ÿçˆ¶ç»„ä»¶é€šä¿¡ï¼Ÿ<small class="fragment">callback</small></li>
              <li class="fragment">å°å”å­ç»„ä»¶å¦‚ä½•è·ŸäºŒå¤§çˆ·ç»„ä»¶é€šä¿¡ï¼Ÿ<small class="fragment">æˆ‘é€‰æ‹©å±äº¡</small></li>
            </ul>
            <h4 class="fragment separated">ç»„ä»¶é—´å­˜åœ¨ä¸¥é‡<strong>ã€Œä»£æ²Ÿã€</strong></h4>
          </section>
        </section>

        <!-- Ext.Router -->
        <section>
          <section data-markdown>
            ## Ext - Router
          </section>

          <section>
            <h3>åŸç”Ÿ Navigator</h3>
            <p class="fragment"><img src="img/simple-navigator.png" class="transparent"></p>
            <p class="fragment">â†‘ <ruby>ç®€<rp>(</rp><rt>hÄ“</rt><rp>)</rp>å•<rp>(</rp><rt>hÄ“</rt><rp>)</rp></ruby>çš„ä¾‹å­</p>
          </section>

          <section data-markdown>
            ### Ext - Router

            ```js
            _onPress() {
              Ext.open('pageA', {
                param: { id: 1 }
              });
            }
            ```

            â†‘ çœŸæ­£ç®€å•çš„ä¾‹å­
          </section>

          <section>
            <h3>é¡µé¢è·³è½¬ API</h3>
            <ul>
              <li class="fragment"><code>open(name[, opts])</code><small>æ‰“å¼€ä¸€ä¸ªæ–°çš„é¡µé¢ï¼ˆæ–°å»ºå†å²ï¼‰</small></li>
              <li class="fragment"><code>back([opts])</code><small>å›åˆ°ä¸Šä¸€ä¸ªé¡µé¢</small></li>
              <li class="fragment"><code>backTo(name[, opts])</code><small>å›åˆ°æŒ‡å®šé¡µé¢</small></li>
              <li class="fragment"><code>goto(name[, opts])</code><small>å‰å¾€æŒ‡å®šé¡µé¢ï¼ˆå†å²ä¸­æœ‰åˆ™å›é€€ï¼‰</small></li>
              <li class="fragment"><code>home([opts])</code><small>å›åˆ°é¦–é¡µ</small></li>
              <li class="fragment"><code>close(name)</code><small>å…³é—­æŒ‡å®šé¡µé¢</small></li>
            </ul>
          </section>

          <section data-markdown>
            ### é¡µé¢ **æ¿€æ´»/å¤±æ´»** å›è°ƒ

            ```js
            class Base extends QView {
              // Events
              bindEvents = {
                actived(param) {
                  console.log('[Base][actived]', param);
                },
                deactived() {
                  console.log('[Base][deactived]');
                }
              };
            };
            ```
          </section>

          <section>
            <h3>å¯¼èˆªæ  NavigatorBar</h3>
            <p><img src="img/bar.png" class="transparent"></p>
            <p class="fragment">æ‹¥æœ‰ä¸°å¯Œçš„è½¬åœºåŠ¨ç”»</p>
            <p class="fragment">å¯ä»¥<em>æŒ‰é¡µé¢</em>å®šåˆ¶</p>
          </section>

          <section data-markdown>
            ### **å…¨å±€**åˆ¶å®š

            ```js
            // é…ç½®å…¨å±€å¯¼èˆªæ 
            Ext.defaults.navBar = {
              // æ˜¯å¦æ˜¾ç¤ºï¼Œé»˜è®¤ä¸º falseï¼Œä¸æ˜¾ç¤º
              isShow: true,
              // å¯¼èˆªæ é«˜åº¦
              height: 80,
              // å·¦ä¾§æŒ‰é’®æ–‡å­—ï¼Œé»˜è®¤ 'è¿”å›'
              leftButtonText: 'back',
              // ...
            };
            ```
          </section>

          <section data-markdown>
            ### **é¡µé¢**åˆ¶å®š

            ```js
            class base extends QView {
              // é…ç½®é¡µé¢å¯¼èˆªæ 
              static routerPlugin = {
                // æ˜¯å¦æ˜¾ç¤ºå¯¼èˆªæ 
                isShow: true,
                // æ ‡é¢˜ï¼Œé»˜è®¤ç©ºå­—ç¬¦ä¸²
                title: 'Base',
                // å·¦ä¾§æŒ‰é’®æ–‡å­—ï¼Œé»˜è®¤ 'è¿”å›'
                leftButtonText: 'back',
                // ...
              };
            }
            ```

            `xxxPlugin` æ˜¯åœ¨é¡µé¢çº§åˆ«è¿›è¡Œ Ext æ’ä»¶é…ç½®çš„æ ‡å‡†å†™æ³•
          </section>

          <section data-markdown>
            ### RN / Native / HY è·³è½¬

            ```js
            Ext.Router.Bridge.sendScheme({
              url: 'qunariphone://react/debug',
            });
            ```
          </section>
        </section>

        <!-- æ•°æ®æµç®¡ç† -->
        <section>
          <section>
            <h2>æ•°æ®æµç®¡ç†</h2>
          </section>

          <section>
            <h3>å¦‚ä½•è§£å†³ç»„ä»¶<strong>ã€Œä»£æ²Ÿã€</strong>ï¼Ÿ</h3>
            <p class="fragment">å‘å¸ƒè®¢é˜…æ¨¡å¼ Pub/Sub <small>publish and subscribe</small></p>
          </section>

          <section>
            <h3>Facebook çš„è§£å†³æ–¹æ¡ˆï¼š<strong>Flux</strong></h3>
            <p class="fragment"><img src="img/flux.png" class="transparent"></p>
          </section>

          <section>
            <h3>é—®é¢˜ï¼Ÿ</h3>
            <ul>
              <li class="fragment"><code>store</code> å°ºå¯¸æ ¹æœ¬æ§åˆ¶ä¸ä½</li>
              <li class="fragment"><strong>å¼‚æ­¥</strong>å¤„ç†å¤ªæ¶å¿ƒ</li>
              <li class="fragment">å„ç§<strong>åæ¨¡å¼</strong><small>å¦‚ reflux å°±éœ€è¦ä½¿ç”¨ <code>mixin</code></small></li>
            </ul>
          </section>
        </section>

        <!-- Flux -->
        <section>
          <section>
            <h3 class="fragment"><strong>Redux</strong></h3>
            <p class="fragment">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                <g fill="#764ABC" transform="scale(0.5, 0.5) translate(50, 0)">
                  <path d="M65.6 65.4c2.9-.3 5.1-2.8 5-5.8-.1-3-2.6-5.4-5.6-5.4h-.2c-3.1.1-5.5 2.7-5.4 5.8.1 1.5.7 2.8 1.6 3.7-3.4 6.7-8.6 11.6-16.4 15.7-5.3 2.8-10.8 3.8-16.3 3.1-4.5-.6-8-2.6-10.2-5.9-3.2-4.9-3.5-10.2-.8-15.5 1.9-3.8 4.9-6.6 6.8-8-.4-1.3-1-3.5-1.3-5.1-14.5 10.5-13 24.7-8.6 31.4 3.3 5 10 8.1 17.4 8.1 2 0 4-.2 6-.7 12.8-2.5 22.5-10.1 28-21.4z"/>
                  <path d="M83.2 53c-7.6-8.9-18.8-13.8-31.6-13.8H50c-.9-1.8-2.8-3-4.9-3h-.2c-3.1.1-5.5 2.7-5.4 5.8.1 3 2.6 5.4 5.6 5.4h.2c2.2-.1 4.1-1.5 4.9-3.4H52c7.6 0 14.8 2.2 21.3 6.5 5 3.3 8.6 7.6 10.6 12.8 1.7 4.2 1.6 8.3-.2 11.8-2.8 5.3-7.5 8.2-13.7 8.2-4 0-7.8-1.2-9.8-2.1-1.1 1-3.1 2.6-4.5 3.6 4.3 2 8.7 3.1 12.9 3.1 9.6 0 16.7-5.3 19.4-10.6 2.9-5.8 2.7-15.8-4.8-24.3z"/>
                  <path d="M32.4 67.1c.1 3 2.6 5.4 5.6 5.4h.2c3.1-.1 5.5-2.7 5.4-5.8-.1-3-2.6-5.4-5.6-5.4h-.2c-.2 0-.5 0-.7.1-4.1-6.8-5.8-14.2-5.2-22.2.4-6 2.4-11.2 5.9-15.5 2.9-3.7 8.5-5.5 12.3-5.6 10.6-.2 15.1 13 15.4 18.3 1.3.3 3.5 1 5 1.5-1.2-16.2-11.2-24.6-20.8-24.6-9 0-17.3 6.5-20.6 16.1-4.6 12.8-1.6 25.1 4 34.8-.5.7-.8 1.8-.7 2.9z"/>
                </g>
              </svg>
            </p>
          </section>

          <section>
            <h3>ä¸‰å¤§åŸåˆ™</h3>
            <ul>
              <li class="fragment">å•ä¸€æ•°æ®æº</li>
              <li class="fragment"><code>state</code> æ˜¯<em>åªè¯»</em>çš„</li>
              <li class="fragment">ä½¿ç”¨<strong>çº¯å‡½æ•°</strong>æ¥æ‰§è¡Œä¿®æ”¹</li>
            </ul>
          </section>

          <section>
            <h3>ç®€å•å¯¹è±¡ <code>action</code></h3>
            <p class="fragment">æè¿°äº‹æƒ…çš„å‘ç”Ÿï¼Œä¾‹å¦‚ï¼š</p>
            <ul>
              <li class="fragment">æ±Ÿå—çš®é©å‚å€’é—­å•¦</li>
              <li class="fragment">å¸¦ç€å°å§¨å­è·‘è·¯å•¦</li>
              <li class="fragment">ç»Ÿç»ŸäºŒåå—ï¼</li>
            </ul>
          </section>

          <section data-markdown>
            #### < / >

            ```js
            cosnt goingBankrupt = () => ({ type: 'GO_BANKRUPT' });
            const runAwayWithSomeone = (someone) => ({
              type: 'RUN_AWAY_WITH_SOMEONE',
              payload: someone,
            });
            const cutPrice = (price) => ({
              type: 'CUT_PRICE',
              payload: price,
            });
            ```
          </section>

          <section>
            <h3>å¯æ§çš„ <code>reducer</code></h3>
            <ul>
              <li class="fragment">æ‰§è¡Œä¿®æ”¹çš„çº¯å‡½æ•°</li>
              <li class="fragment"><code>action</code> çš„è°ƒåº¦å™¨</li>
              <li class="fragment">å¯ä»¥<strong>è‡ªç”±æ‹†åˆ†ç»„åˆ</strong></li>
            </ul>
          </section>

          <section data-markdown>
            #### < / >

            ```js
            const initialState = {
              status: 'normal',
            };
            const leatherFactory = (state = initialState, action) => {
              switch (action.type) {
                case 'GO_BANKRUPT':
                  return { status: 'bankrupt' };
                // ...other case  
                default:
                  return state;
              }
            };
            ```
          </section>

          <section data-markdown>
            #### < / >

            ```js
            const initialState = {
              status: 'in factory',
              partner: 'wife',
            };
            const boss = (state = initialState, action) => {
              switch (action.type) {
                case 'RUN_AWAY_WITH_SOMEONE':
                  return { status: 'run away', partner: 'sister in law' };
                // ...other case  
                default:
                  return state;
              }
            }
            ```
          </section>

          <section data-markdown>
            #### < / >

            ```js
            import { combineReducers } from 'redux';

            export default combineReducers({
              leatherFactory,
              wangbadan: boss,
              wallet,
            });
            ```
          </section>

          <section>
            <img src="http://7xinjg.com1.z0.glb.clouddn.com/combined-redux.png">
            <figcaption><em>æ ‘çŠ¶</em>ç»“æ„çš„ reducer</figcaption>
          </section>

          <section>
            <h3>å¼‚æ­¥å¤„ç†ï¼Ÿ<small>è·‘è·¯ä¹‹å‰ï¼Œè¦å…ˆç­‰å°å§¨å­åŒ–ä¸€ä¸ªå°æ—¶çš„å¦†ï¼ˆè¯¯</small></h3>
            <p class="fragment">ä½¿ç”¨<strong>ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰</strong>è¿›è¡Œè‡ªç”±æ‰©å±•</p>
            <ul>
              <li class="fragment">redux-thunk</li>
              <li class="fragment">redux-promise</li>
              <li class="fragment">...</li>
            </ul>
          </section>

          <section data-markdown>
            #### < / >

            ```js
            const runAwayWithSomeone = someone => dispatch => {
              if (someone.haveToMakeUp) {
                someone.makeup.then(() => dispatch({
                  type: 'RUN_AWAY_WITH_SOMEONE',
                  payload: someone,
                }));
              }
              // ...
            };
            ```
          </section>

          <section data-markdown>
            #### < / >

            ```js
            import { applyMiddleware, createStore } from 'redux';
            import reduxThunk from 'redux-thunk';

            // ä¸­é—´ä»¶å¤šäº†ä»¥åå°±éœ€è¦ compose äº†
            const finalCreateStore = applyMiddleware(reduxThunk)(createStore);
            const store = finalCreateStore(combinedReducer);
            ```

            **å‡½æ•°å¼**ç¼–ç¨‹ï¼Œé—¨æ§›è¾ƒé«˜
          </section>

          <section>
            <h3>æ›´å¥½çš„æ¥å…¥ react</h3>
            <p class="fragment fade-out">react-redux</p>
            <p class="fragment fade-up"><strong>Ext - Redux</strong></p>
          </section>
        </section>

        <section>
          <section>
            <h2>Ext - Redux</h2>
          </section>

          <section data-markdown>
            ### å…¨å±€é…ç½®

            ```js
            Ext.defaults.redux = {
              // é…ç½® createStore çš„ä¸‰ä¸ªå‚æ•° reducer/initialState/enhancer
              reducer,
              initialState,
              enhancer
              // é…ç½® middleware ä¸­é—´ä»¶
              middleware: []
            };
            ```

            å»é™¤å„ç§å¤æ‚é…ç½®
          </section>

          <section data-markdown>
            ### é¡µé¢/ç»„ä»¶çº§é…ç½®

            ```js
            class Page extends QComponet {
              static reduxPlugin = {
                mapStateToProps: (state) => ({
                    shopList: state.shopList
                    category: state.shopInfo.category
                }),

                mapDispatchToProps: { changeFoodCount }
              };
            }
            ```

             æ’ä»¶é€šç”¨é…ç½®æ–¹å¼ï¼ŒåŠŸæ•ˆè·Ÿ `@connect` ä¸€æ ·
          </section>

          <section data-markdown>
            ### æä¾›æ•°æ®éš”ç¦»æªæ–½
            
            ```js
            Ext.open('MyPage:new');
            // å³å¯ä½¿ç”¨ä¸€ä¸ªæ–° store å‰¯æœ¬æ‰“å¼€ä¸€ä¸ªæ•°æ®éš”ç¦»çš„é¡µé¢
            ```
          </section>
        </section>

        <section>
          <h2>Q&amp;A</h2>
          <p><small>- EOF -</small></p>
        </section>
      </div> 
    </div>

    <script src="//malcolmyu.github.io/reveal.js/lib/js/head.min.js"></script>
    <script src="//malcolmyu.github.io/reveal.js/js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || "linear", // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: "https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg",
        // parallaxBackgroundSize: "2100px 900px",

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: "//malcolmyu.github.io/reveal.js/lib/js/classList.js", condition: function() { return !document.body.classList; } },
          { src: "//malcolmyu.github.io/reveal.js/plugin/markdown/marked.js", condition: function() { return !!document.querySelector( "[data-markdown]" ); } },
          { src: "//malcolmyu.github.io/reveal.js/plugin/markdown/markdown.js", condition: function() { return !!document.querySelector( "[data-markdown]" ); } },
          { src: "//malcolmyu.github.io/reveal.js/plugin/highlight/highlight.js", async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: "//malcolmyu.github.io/reveal.js/plugin/zoom-js/zoom.js", async: true, condition: function() { return !!document.body.classList; } },
          { src: "//malcolmyu.github.io/reveal.js/plugin/notes/notes.js", async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>
  </body>
</html>
